{"ast":null,"code":"var _jsxFileName = \"/Users/shashang/Projects/ss-clothing/client/src/App.js\";\nimport React, { useEffect, useState, lazy, Suspense } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport Header from './components/header/header.component';\nimport Spinner from './components/spinner/spinner.component';\nimport CurrentUserContext from './contexts/current-user/current-user.context';\nimport { auth, createUserProfileDocument } from './firebase/firebase.utils';\nimport { GlobalStyle } from './global.styles';\nimport ErrorBoundary from './components/error-boundary/error-boundary.component';\nconst HomePage = lazy(() => import('./pages/homepage/homepage.component'));\nconst ShopPage = lazy(() => import('./pages/shoppage/shoppage.component'));\nconst SignInPage = lazy(() => import('./pages/signin-and-registerpage/signinpage/signinpage.component'));\nconst RegisterPage = lazy(() => import('./pages/signin-and-registerpage/registerpage/registerpage.component'));\nconst CheckoutPage = lazy(() => import('./pages/checkoutpage/checkoutpage.component'));\n\nconst App = () => {\n  const [currentUser, setCurrentUser] = useState(null);\n  useEffect(() => {\n    const unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n        });\n      }\n\n      setCurrentUser(userAuth);\n    });\n    return () => {\n      unsubscribeFromAuth();\n    };\n  }, [setCurrentUser]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(GlobalStyle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ErrorBoundary, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CurrentUserContext.Provider, {\n    value: currentUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 29\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: HomePage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/shop\",\n    component: ShopPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/checkout\",\n    component: CheckoutPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/signin\",\n    render: () => currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }) : /*#__PURE__*/React.createElement(SignInPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 19\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/register\",\n    render: () => currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }) : /*#__PURE__*/React.createElement(RegisterPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 19\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/shashang/Projects/ss-clothing/client/src/App.js"],"names":["React","useEffect","useState","lazy","Suspense","Switch","Route","Redirect","Header","Spinner","CurrentUserContext","auth","createUserProfileDocument","GlobalStyle","ErrorBoundary","HomePage","ShopPage","SignInPage","RegisterPage","CheckoutPage","App","currentUser","setCurrentUser","unsubscribeFromAuth","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, lazy, Suspense } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport Header from './components/header/header.component';\nimport Spinner from './components/spinner/spinner.component';\n\nimport CurrentUserContext from './contexts/current-user/current-user.context';\nimport { auth, createUserProfileDocument } from './firebase/firebase.utils';\n\nimport { GlobalStyle } from './global.styles';\nimport ErrorBoundary from './components/error-boundary/error-boundary.component';\n\nconst HomePage = lazy(() => import('./pages/homepage/homepage.component'));\nconst ShopPage = lazy(() => import('./pages/shoppage/shoppage.component'));\nconst SignInPage = lazy(() =>\n  import('./pages/signin-and-registerpage/signinpage/signinpage.component'));\nconst RegisterPage = lazy(() =>\n  import('./pages/signin-and-registerpage/registerpage/registerpage.component'));\nconst CheckoutPage = lazy(() => import('./pages/checkoutpage/checkoutpage.component'));\n\n\nconst App = () => {\n\n  const [currentUser, setCurrentUser] = useState(null);\n\n  useEffect(() => {\n    const unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n        });\n      }\n      setCurrentUser(userAuth);\n    });\n\n    return () => { unsubscribeFromAuth(); }\n  }, [setCurrentUser])\n\n  return (\n    <div>\n      <GlobalStyle />\n      <ErrorBoundary></ErrorBoundary>\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n      </CurrentUserContext.Provider>\n      <Switch>\n        <Suspense fallback={<Spinner />}>\n          <Route exact path='/' component={HomePage} />\n          <Route path='/shop' component={ShopPage} />\n          <Route path='/checkout' component={CheckoutPage} />\n          <Route exact path='/signin'\n            render={() =>\n              currentUser ? (\n                <Redirect to='/' />\n              ) : (\n                  <SignInPage />\n                )}\n          />\n          <Route exact path='/register'\n            render={() =>\n              currentUser ? (\n                <Redirect to='/' />\n              ) : (\n                  <RegisterPage />\n                )}\n          />\n        </Suspense>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}